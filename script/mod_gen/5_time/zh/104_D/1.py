def solve():
    # 解题思路
    # 1. 遍历字符串，统计A、B、C的位置
    # 2. 从左到右遍历字符串，遇到?则加上之前的值，然后加上A、B、C的位置
    # 3. 从右到左遍历字符串，遇到?则加上之后的值，然后加上A、B、C的位置
    # 4. 从左到右遍历字符串，遇到?则加上之前的值，然后加上A、B、C的位置
    # 5. 从右到左遍历字符串，遇到?则加上之后的值，然后加上A、B、C的位置
    # 6. 从左到右遍历字符串，遇到?则加上之前的值，然后加上A、B、C的位置
    # 7. 从右到左遍历字符串，遇到?则加上之后的值，然后加上A、B、C的位置
    # 8. 从左到右遍历字符串，遇到?则加上之前的值，然后加上A、B、C的位置
    # 9. 从右到左遍历字符串，遇到?则加上之后的值，然后加上A、B、C的位置
    # 10. 从左到右遍历字符串，遇到?则加上之前的值，然后加上A、B、C的位置
    # 11. 从右到左遍历字符串，遇到?则加上之后的值，然后加上A、B、C的位置
    # 12. 从左到右遍历字符串，遇到?则加上之前的值，然后加上A、B、C的位置
    # 13. 从右到左遍历字符串，遇到?则加上之后的值，然后加上A、B、C的位置
    #

if __name__ == '__main__':
    solve()